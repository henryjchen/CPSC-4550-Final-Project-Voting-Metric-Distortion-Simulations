This repository contains the code to execute the computer experiments in the paper
"The Metric Distortion of Randomized Social Choice Functions: C1 Maximal Lottery Rules and Simulations" by Fabian Frank and Patrick Lederer.

The paper will be published at AAMAS 2025 and an Arxiv version can be found here: https://arxiv.org/abs/2403.18340.

For executing the code, you need Gurobi. Once gurobi is installed, please execute the command 'pip install -r requirements.txt' to download all required packages. 

Once this is done, you should be able to execute our simulations with synthetic data (execute Parallel.py) and the Spotify Daily dataset (execute SequentialRealWorld.py).
Executing the code on the Spotify Daily dataset requires you to download this dataset (https://preflib.github.io/PrefLib-Jekyll/dataset/00047), move the dataset to the same directory as this file, and rename the directory of the dataset to "spotifyday".
Additionally, we provide the file Plotting.py, which can be used to create plots from the data created by our simulations. Note, however, that the plots in the 
paper were created by different means (we transformed the data to csv files and plot these directly with latex). 

We next explain the structure of the repository in more detail. 
- The subdirectory 'Sampling' contains files for randomly sampling preference profiles and reading the data from Spotify Daily.
- The subdirectory 'RSCFs' contains the implementation of our five RSCFs.
- The Helper.py file contains various auxiliary functions for computing our RSCFs. Moreover, the function for computing the metric distortion of a lottery for a profile is here.
- The Experiment.py file contains the setup of our experiments with synthetic data (including number of alternatives, voters, and distributions of the number of voters).
- The Parallel.py file executed the Experiment.py file in parallel. We run each distribution in an own thread.
- The SequentialRealWorld.py file contains the setup of our experiments with the Spotify Daily dataset.
- The ReadData.py file provides access to the data generated by our experiments.
- The Plotting.py file provides a basic implementation for plotting statistics inferred from our experiments.
- The subdirectory 'Data' is where the data generated by our experiments will be stored. It is initially empty and will be filled by our code. 
- The subdirectory 'spotifyday' contains the necessary data of the Spotify Daily dataset for our experiments. We note that this dataset is provided by Boehmer and Schaar.
